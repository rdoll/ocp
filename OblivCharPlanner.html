<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!--
    Author: Richard Doll
    Copyright (C) 2009 by Richard Doll
    Written with Dojo 1.3.0
    Developed on FireFox 3.0, but should be DOM and JavaScript 1.5 compatible.
*** "for each" and array "indexOf" are JavaScript 1.6 constructs...
*** Need to test on IE or warn if user isn't using FireFox ***
-->

<head>
    <!-- HTTP header info -->
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="Content-Language" content="en" />

    <!-- Title -->
    <title>TES IV: Oblivion - Character Planner</title>

    <!-- Describe this document -->
    <meta name="author" content="Richard Doll" />
    <meta name="copyright" content="Copyright &copy; 2009 by Richard Doll" />
    <!-- *** Keep my email addy in here? -->
    <link rev="made" href="mailto:richard_3655@yahoo.com" />
    <meta name="description"
        content="Plans a new or existing TES IV: Oblivion character's leveling progress." />
    <meta name="keywords"
        content="TES, TES4, TES 4, TESIV, TES IV, The Elder Scrolls, Elder Scrolls, Oblivion,
            character, planner, plan, forecast, progress, level, leveling, power level, power leveling" />

    <!-- Load styles (Dijit theme followed by OCP specific) -->
    <link rel="stylesheet" type="text/css" href="dojotoolkit/dijit/themes/soria/soria.css" />
    <link rel="stylesheet" type="text/css" href="styles/ocp.css" />

    <!-- Load the Dojo toolkit base -->
    <script type="text/javascript" src="dojotoolkit/dojo/dojo.js"
        djConfig="parseOnLoad:true, isDebug:true"></script>

    <!-- Load Dojo/Dijit required elements -->
    <script type="text/javascript">//<![CDATA[
/* *** Be sure to scrub this list to ensure nothing we don't need **** */
        dojo.require('dojo.dnd.Source');
        dojo.require('dojo.html');
        dojo.require('dijit.Declaration');
        dojo.require('dijit.Dialog');
        dojo.require('dijit.form.Button');
        dojo.require('dijit.form.CheckBox');
        dojo.require('dijit.form.DropDownButton');
        dojo.require('dijit.form.Form');
        dojo.require('dijit.form.HorizontalRule');
        dojo.require('dijit.form.HorizontalRuleLabels');
        dojo.require('dijit.form.HorizontalSlider');
        dojo.require('dijit.form.NumberSpinner');
        dojo.require('dijit.layout.BorderContainer');
        dojo.require('dijit.layout.ContentPane');
        dojo.require('dijit.layout.StackContainer');
        dojo.require('dijit.layout.TabContainer');
        dojo.require('dijit.Menu');
        dojo.require('dijit.Tooltip');
    //]]></script>

    <!-- Load the OCP scripts in order -->
    <script type="text/javascript" src="scripts/ocp.js"></script>
    <script type="text/javascript" src="scripts/ocp-race.js"></script>
    <script type="text/javascript" src="scripts/ocp-birth.js"></script>
    <script type="text/javascript" src="scripts/ocp-cclass.js"></script>
    <script type="text/javascript" src="scripts/ocp-existing.js"></script>
    <script type="text/javascript" src="scripts/ocp-order.js"></script>
    <script type="text/javascript" src="scripts/ocp-level.js"></script>
    <script type="text/javascript" src="scripts/ocp-results.js"></script>
    <script type="text/javascript" src="scripts/ocp-widget.js"></script>
</head>

<body class="soria">
    <h1>The Elder Scrolls IV: Oblivion - Character Planner</h1>

    <!-- Notify browsers that didn't run the scripts causing this page to look broken -->
    <noscript>
        <!-- *** Move to styles? -->
        <h3 style="color: red">The JavaScript scripts required to
        operate the Oblivion Character Planner cannot be run.<br />Either your browser does
        not support JavaScript or you need to enable it for these pages.</h3>
    </noscript>

    <p>Something about how to use this thing...</p>

    <!-- Better warn the user about the memory leaks. :( -->
    <!-- Use inline styles so this warning can be easily (and hopefully soon) removed. -->
    <div style="background-color: #ccc; border: 1px solid black; padding: 4px; margin: 10px; width: 690px">
        <span style="font-weight: bold; font-style: italic; color: red;">Warning:</span>
        <div>
            This was written using Dojo 1.3.0, which seems to have a memory leak.
            If you reload this page many times, you should close your browser and
            open a new one to prevent the leak from growing too large.
        </div>
    </div>

    <!-- Character planner -->
    <div dojoType="dijit.layout.BorderContainer" id="plannerPane" liveSplitters="true">

        <!-- The center panel is for character data input -->
        <div dojoType="ocp.widget.TitledContentPane" id="plannerInputPane" region="center"
            title="Character Details" splitter="true">

            <!-- This div allows the stackContainter's doLayout=false to properly size the contents.
                 Without these, the content is sized assuming the StackController is zero height;
                 so when the StackController is actually rendered, we get scrollbars in the pane.
                 *** Useful info in this post?
                 *** http://www.dojotoolkit.org/forum/dijit-dijit-0-9/dijit-support/
                 ***     fix-tabs-dolayout-false-look-right -->
            <div>
                <!-- Buttons for the stack container -->
                <!-- *** When a button is pressed, need to call ocp.notifyChanged() to update results -->
                <div dojoType="dijit.layout.StackController" containerId="inputStackContainer">
                    <!-- Contents generated by Dojo -->
                </div>

                <!-- See anonymous div above for why doLayout=false -->
                <div dojoType="dijit.layout.StackContainer" id="inputStackContainer"
                    doLayout="false">

                    <!-- Info for a new character -->
                    <div dojoType="dijit.layout.ContentPane" title="New Character">
                        <!-- Value and Details contents maintained by OCP -->
                        <table id="inputTable">
                        <tbody>
                            <tr>
                                <td>
                                    <button dojoType="dijit.form.Button" id="raceDialogButton"
                                        onclick="dijit.byId('raceDialog').show()">
                                        Race
                                    </button>
                                </td>
                                <td id="raceValue" class="selectedValue">-none-</td>
                                <td id="raceSpecials"
                                    title="Special abilities and weaknesses for this Race.">-none-</td>
                            </tr>

                            <tr>
                                <td>
                                    <button dojoType="dijit.form.Button" id="birthDialogButton"
                                        onclick="dijit.byId('birthDialog').show()">
                                        Birthsign
                                    </button>
                                </td>
                                <td id="birthValue" class="selectedValue">-none-</td>
                                <td id="birthSpecials"
                                    title="Special abilities for this Birthsign.">-none-</td>
                            </tr>

                            <tr>
                                <td id="classDropdownContainer"></td>
                                <td id="classValue" class="selectedValue">-none-</td>
                                <td id="classDetails">-none-</td>
                            </tr>
                        </tbody>
                        </table>
                    </div>

                    <!-- Info for an existing character -->
                    <div dojoType="dijit.layout.ContentPane" title="Existing Character">
                        <!-- Value and Details contents maintained by OCP -->
                        <table>
                        <tbody>
                            <tr>
                                <td class="selectedName">Level:</td>
                                <td id="levelValue" class="selectedValue">-none-</td>
                                <td id="levelSliderContainer"></td>
                            </tr>

                            <tr>
                                <td>
                                    <button dojoType="dijit.form.Button" id="attrDialogButton"
                                        onclick="dijit.byId('attrDialog').show()">
                                        Attributes
                                    </button>
                                </td>
                                <td colspan="2" id="attrValues">-none-</td>
                            </tr>

                            <tr>
                                <td>
                                    <button dojoType="dijit.form.Button" id="skillDialogButton"
                                        onclick="dijit.byId('skillDialog').show()">
                                        Skills
                                    </button>
                                </td>
                                <td colspan="2" id="skillValues">-none-</td>
                            </tr>
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- The right panel is for the order necessary for the leveling process -->
        <div dojoType="ocp.widget.TitledContentPane" id="plannerOrderPane" region="right"
            title="Leveling Order">
            <div id="attrOrderDndSource" class="dndContainer">
                <!-- Contents inserted by OCP -->
            </div>
        </div>

        <!-- The bottom panel displays the results -->
        <div dojoType="ocp.widget.TitledContentPane" id="plannerResultsPane" region="bottom"
            title="Leveling Results" splitter="true">

            <!-- This div allows the stackContainter's doLayout=false to properly size the contents.
                 Without these, the content is sized assuming the StackController is zero height;
                 so when the StackController is actually rendered, we get scrollbars in the pane.
                 *** Useful info in this post?
                 *** http://www.dojotoolkit.org/forum/dijit-dijit-0-9/dijit-support/
                 ***     fix-tabs-dolayout-false-look-right -->
            <div>
                <!-- Buttons for the stack container -->
                <div dojoType="dijit.layout.StackController" containerId="resultsStackContainer">
                    <!-- Contents generated by Dojo -->
                </div>

                <!-- See anonymous div above for why doLayout=false -->
                <div dojoType="dijit.layout.StackContainer" id="resultsStackContainer" doLayout="false">

                    <!-- Initial stats (contents managed by OCP) -->
                    <div dojoType="dijit.layout.ContentPane" id="resultsStartingPane"
                        title="Initial Stats">
                        <div id="resultsStartingAttributes">
                            -none-
                        </div>
                        <div id="resultsStartingSkills">
                            -none-
                        </div>
                    </div>

                    <!-- Leveling details (contents managed by OCP) -->
                    <div dojoType="dijit.layout.ContentPane" id="resultsLevelingPane"
                        title="Leveling Details">
                        -none-
                    </div>

                    <!-- Resulting analysis (contents managed by OCP) -->
                    <div dojoType="dijit.layout.ContentPane" id="resultsAnalysisPane"
                        title="Analysis">
                        -none-
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer info with author info -->
    <!-- *** enable this when done...
    <div>
        <hr />
        <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml10-blue"
                alt="Valid XHTML 1.0 Strict" height="31" width="88" />
        </a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img style="border:0;width:88px;height:31px"
                src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
                alt="Valid CSS!" />
        </a>
    </div>
    -->

    <!-- Race selection dialog -->
    <div dojoType="dijit.Dialog" id="raceDialog" title="Choose Your Character's Race and Gender">
        <div dojoType="dijit.layout.TabContainer" id="raceTabContainer">

            <!-- Overview with descriptions and pictures -->
            <div dojoType="dijit.layout.ContentPane" id="raceOverviewPane" title="Overview">
                <!-- Contents generated by OCP -->
            </div>

            <!-- Hard core details -->
            <div dojoType="dijit.layout.ContentPane" id="raceDetailsPane" title="Detailed Stats">
                <!-- Contents generated by OCP -->
            </div>
        </div>
    </div>

    <!-- Birthsign selection dialog -->
    <div dojoType="dijit.Dialog" id="birthDialog" title="Choose Your Character's Birthsign">
        <div dojoType="dijit.layout.ContentPane" id="birthContainer">
            <div id="birthIntro">
                In Tamriel, persons born under certain constellations are said to be &quot;fortunate
                in their aspects&quot;. Such persons are often blessed -- or cursed -- with remarkable
                abilities or weaknesses as a result of the magical conjunctions of celestial influences.
            </div>
            <!-- Additional contents generated by OCP -->
        </div>
    </div>


    <!-- Existing character's attributes dialog -->
    <div dojoType="dijit.Dialog" id="attrDialog" title="Existing Character's Attributes">
        <div dojoType="dijit.layout.ContentPane" id="attrContainer">

            <!-- Core attributes -->
            <div id="coreAttrContainer">
                <!-- Contents generated by OCP -->
            </div>

            <!-- Derived attributes -->
            <div id="derivedAttrContainer">
                <!-- Contents generated by OCP -->
            </div>

            <!-- *** Need to add a note reminding user derived attrs are not checked against
                 *** core attrs in any way; e.g. could have str=100 but enc=150 (should be 500). -->

            <!-- Buttons to manage the dialog -->
            <div class="dialogButtonFooter">
                <button dojoType="dijit.form.Button" type="submit"
                    title="Accept changes and close dialog">Done</button>
                <button dojoType="dijit.form.Button" onclick="ocp.existing.attrDialog.undo()"
                    title="Undo changes but keep dialog open">Undo</button>
                <button dojoType="dijit.form.Button" onclick="ocp.existing.attrDialog.reset()"
                    title="Reset everything to initial values">Reset</button>
                <button dojoType="dijit.form.Button" onclick="ocp.existing.attrDialog.cancel()"
                    title="Abort changes and close dialog">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Existing character's skills dialog -->
    <div dojoType="dijit.Dialog" id="skillDialog" title="Existing Character's Skills">
        <div dojoType="dijit.layout.ContentPane" id="skillContainer">

            <!-- Form for all skill settings (div instead of form to work around IE bug) -->
            <div dojoType="dijit.form.Form" id="skillForm"
                encType="multipart/form-data" action="" method="">

                <!-- Skills -->
                <div id="skillInputsContainer">
                    <!-- Contents generated by OCP -->
                </div>

                <!-- Buttons to manage the dialog -->
                <div class="dialogButtonFooter">
                    <button dojoType="dijit.form.Button" type="submit"
                        title="Accept changes and close dialog">Done</button>
                    <button dojoType="dijit.form.Button" onclick="ocp.existing.skillDialog.undo()"
                        title="Undo changes but keep dialog open">Undo</button>
                    <button dojoType="dijit.form.Button" type="reset"
                        title="Reset everything to initial values">Reset</button>
                    <button dojoType="dijit.form.Button" onclick="ocp.existing.skillDialog.cancel()"
                        title="Abort changes and close dialog">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
